{"version":3,"file":"JsonHubProtocol.js","sourceRoot":"","sources":["../../src/JsonHubProtocol.ts"],"names":[],"mappings":";AAAA,sDAAsD;AACtD,+GAA+G;;AAG/G,yDAAwD;AAE3C,QAAA,sBAAsB,GAAW,MAAM,CAAC;AAErD;IAAA;QAEoB,SAAI,GAAW,8BAAsB,CAAC;QAEtC,SAAI,gBAAmC;IAoB3D,CAAC;IAlBU,uCAAa,GAApB,UAAqB,KAAa;QAC9B,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACT,MAAM,CAAC,EAAE,CAAC;QACd,CAAC;QAED,qBAAqB;QACrB,IAAM,QAAQ,GAAG,qCAAiB,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAChD,IAAM,WAAW,GAAG,EAAE,CAAC;QACvB,GAAG,CAAC,CAAkB,UAAQ,EAAR,qBAAQ,EAAR,sBAAQ,EAAR,IAAQ;YAAzB,IAAM,OAAO,iBAAA;YACd,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;SACzC;QAED,MAAM,CAAC,WAAW,CAAC;IACvB,CAAC;IAEM,sCAAY,GAAnB,UAAoB,OAAmB;QACnC,MAAM,CAAC,qCAAiB,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;IAC5D,CAAC;IACL,sBAAC;AAAD,CAAC,AAxBD,IAwBC;AAxBY,0CAAe","sourcesContent":["// Copyright (c) .NET Foundation. All rights reserved.\r\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\r\n\r\nimport { HubMessage, IHubProtocol, ProtocolType } from \"./IHubProtocol\";\r\nimport { TextMessageFormat } from \"./TextMessageFormat\";\r\n\r\nexport const JSON_HUB_PROTOCOL_NAME: string = \"json\";\r\n\r\nexport class JsonHubProtocol implements IHubProtocol {\r\n\r\n    public readonly name: string = JSON_HUB_PROTOCOL_NAME;\r\n\r\n    public readonly type: ProtocolType = ProtocolType.Text;\r\n\r\n    public parseMessages(input: string): HubMessage[] {\r\n        if (!input) {\r\n            return [];\r\n        }\r\n\r\n        // Parse the messages\r\n        const messages = TextMessageFormat.parse(input);\r\n        const hubMessages = [];\r\n        for (const message of messages) {\r\n            hubMessages.push(JSON.parse(message));\r\n        }\r\n\r\n        return hubMessages;\r\n    }\r\n\r\n    public writeMessage(message: HubMessage): string {\r\n        return TextMessageFormat.write(JSON.stringify(message));\r\n    }\r\n}\r\n"]}